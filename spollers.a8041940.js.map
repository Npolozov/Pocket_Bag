{"mappings":"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","sources":["src/js/spollers.js"],"sourcesContent":["\"use strict\";\n\nconst spollersArray = document.querySelectorAll('[data-spollers]');\nif (spollersArray.length > 0) {\n    // Получение обычных спойлеров\n    const spollersRegular = Array.from(spollersArray).filter(function (item, index, self) {\n        return !item.dataset.spollers.split(\",\")[0];\n    });\n    // Инициализация обычных спойлеров\n    if (spollersRegular.length > 0) {\n        initSpollers(spollersRegular);\n    }\n\n    // Получение спойлеров с медиа запросами\n    const spollersMedia = Array.from(spollersArray).filter(function (item, index, self) {\n        return item.dataset.spollers.split(\",\")[0];\n    });\n\n    // Инициализация спойлеров с медиа запросами\n    if (spollersMedia.length > 0) {\n        const breakpointsArray = [];\n        spollersMedia.forEach(item => {\n            const params = item.dataset.spollers;\n            const breakpoint = {};\n            const paramsArray = params.split(\",\");\n            breakpoint.value = paramsArray[0];\n            breakpoint.type = paramsArray[1] ? paramsArray[1].trim() : \"max\";\n            breakpoint.item = item;\n            breakpointsArray.push(breakpoint);\n        });\n\n        // Получаем уникальные брейкпоинты\n        let mediaQueries = breakpointsArray.map(function (item) {\n            return '(' + item.type + \"-width: \" + item.value + \"px),\" + item.value + ',' + item.type;\n        });\n        mediaQueries = mediaQueries.filter(function (item, index, self) {\n            return self.indexOf(item) === index;\n        });\n\n        // Работаем с каждым брейкпоинтом\n        mediaQueries.forEach(breakpoint => {\n            const paramsArray = breakpoint.split(\",\");\n            const mediaBreakpoint = paramsArray[1];\n            const mediaType = paramsArray[2];\n            const matchMedia = window.matchMedia(paramsArray[0]);\n\n            // Обьекты с нужными условиями\n            const spollersArray = breakpointsArray.filter(function (item) {\n                if (item.value === mediaBreakpoint && item.type === mediaType) {\n                    return true;\n                }\n            });\n            // Событие\n            matchMedia.addListener(function () {\n                initSpollers(spollersArray, matchMedia);\n            });\n            initSpollers(spollersArray, matchMedia);\n        });\n    }\n    // Инициализация\n    function initSpollers(spollersArray, matchMedia = false) {\n        spollersArray.forEach(spollersBlock => {\n            spollersBlock = matchMedia ? spollersBlock.item : spollersBlock;\n            if (matchMedia.matches || !matchMedia) {\n                spollersBlock.classList.add('_init');\n                initSpollersBody(spollersBlock);\n                spollersBlock.addEventListener(\"click\", setSpollersAction);\n            } else {\n                spollersBlock.classList.remove('_init');\n                initSpollersBody(spollersBlock, false);\n                spollersBlock.removeEventListener(\"click\", setSpollersAction);\n            }\n        });\n    }\n    // Работаем  сконтентом\n    function initSpollersBody(spollersBlock, hideSpollersBody = true) {\n        const spollerTitles = spollersBlock.querySelectorAll('[data-spoller]');\n        if (spollerTitles.length > 0) {\n            spollerTitles.forEach(spollerTitle => {\n                if (hideSpollersBody) {\n                    spollerTitle.removeAttribute('tabindex');\n                    if (!spollerTitle.classList.contains('_active')) {\n                        spollerTitle.nextElementSibling.hidden = true;\n                    }\n                } else {\n                    spollerTitle.setAttribute('tabindex', '-1');\n                    spollerTitle.nextElementSibling.hidden = false;\n                }\n            });\n        }\n    }\n    function setSpollersAction(e) {\n        const el = e.target;\n        if (el.hasAttribute('data-spoller') || el.closest('[data-spoller]')) {\n            const spollerTitle = el.hasAttribute('data-spoller') ? el : el.closest('[data-spoller]');\n            const spollersBlock = spollerTitle.closest('[data-spollers]');\n            const oneSpoller = spollersBlock.hasAttribute('data-one-spoller') ? true : false;\n            if (!spollersBlock.querySelectorAll('._slide').length) {\n                if(oneSpoller && !spollerTitle.classList.contains('_active')) {\n                    hideSpollersBody(spollersBlock);\n                }\n                spollerTitle.classList.toggle('_active');\n                _slideToggle(spollerTitle.nextElementSibling, 500);\n            }\n            e.preventDefault();\n        }\n    }\n    function hideSpollersBody(spollersBlock) {\n        const spollerActiveTitle = spollersBlock.querySelector('[data-spoller]._active');\n        if (spollerActiveTitle) {\n            spollerActiveTitle.classList.remove('_active');\n            _slideUp(spollerActiveTitle.nextElementSibling, 500);\n        }\n    }\n}\n\nlet _slideUp = (target, duration = 500) => {\n    if (!target.classList.contains('_slide')) {\n        target.classList.add('_slide');\n        target.style.transitionProperty = 'height, margin, padding';\n        target.style.transitionDuration = duration + 'ms';\n        target.style.height = target.offsetHeight + 'px';\n        target.offsetHeight;\n        target.style.overflow = 'hidden';\n        target.style.height = 0;\n        target.style.paddingTop = 0;\n        target.style.paddingBottom = 0;\n        target.style.marginTop = 0;\n        target.style.marginBottom = 0;\n        window.setTimeout(() => {\n            target.hidden = true;\n            target.style.removeProperty('height');\n            target.style.removeProperty('padding-top');\n            target.style.removeProperty('padding-bottom');\n            target.style.removeProperty('margin-top');\n            target.style.removeProperty('margin-bottom');\n            target.style.removeProperty('overflow');\n            target.style.removeProperty('transition-duration');\n            target.style.removeProperty('transition-property');\n            target.classList.remove('_slide');\n        }, duration);\n    }\n}\nlet _slideDown = (target, duration = 500) => {\n    if (!target.classList.contains('_slide')) {\n        target.classList.add('_slide');\n        if (target.hidden) {\n            target.hidden = false;\n        }\n        let height = target.offsetHeight;\n        target.style.overflow = 'hidden';\n        target.style.height = 0;\n        target.style.paddingTop = 0;\n        target.style.paddingBottom = 0;\n        target.style.marginTop = 0;\n        target.style.marginBottom = 0;\n        target.offsetHeight;\n        target.style.transitionProperty = 'height, margin, padding';\n        target.style.transitionDuration = duration + 'ms';\n        target.style.height = height + 'px';\n        target.style.removeProperty('padding-top');\n        target.style.removeProperty('padding-bottom');\n        target.style.removeProperty('margin-top');\n        target.style.removeProperty('margin-bottom');\n        window.setTimeout(() => {\n            target.style.removeProperty('height');\n            target.style.removeProperty('overflow');\n            target.style.removeProperty('transition-duration');\n            target.style.removeProperty('transition-property');\n            target.classList.remove('_slide');\n        }, duration);\n    }\n}\nlet _slideToggle = (target, duration = 500) => {\n    if (target.hidden) {\n        return _slideDown(target, duration);\n    } else {\n        return _slideUp(target, duration);\n    }\n}\n\n\n/* \nДля родителя спойлеров пишем атрибут data-spollers\nДля заголовков спойлеров пишем атрибут data-spoller\nЕсли нужно включить\\выключить работу спойлеров на разных размерах экранов\nпишем параметры ширины и типа брейкпоинта.\nНапиример:\ndata-spollers\"992,max\" - спойлер будет работать только на экранах меньше или равно 992px\ndata-spollers\"768,min\" - спойлер будет работать только на экранах больше или равно 768px\n\nЕси нужно что бы в блоке открывался только один спойлер добавляем атрибут data-one-spoller\n*/"],"names":["$ce6ec488e3aace99$var$spollersArray","document","querySelectorAll","length","$ce6ec488e3aace99$var$spollersRegular","Array","from","filter","item","index","self","dataset","spollers","split","$ce6ec488e3aace99$var$initSpollers","$ce6ec488e3aace99$var$spollersMedia","$ce6ec488e3aace99$var$breakpointsArray","forEach","breakpoint","paramsArray","value","type","trim","push","$ce6ec488e3aace99$var$mediaQueries","map","indexOf","mediaBreakpoint","mediaType","matchMedia","window","spollersArray1","addListener","spollersArray2","arguments","spollersBlock","matches","classList","add","$ce6ec488e3aace99$var$initSpollersBody","addEventListener","$ce6ec488e3aace99$var$setSpollersAction","remove","removeEventListener","hideSpollersBody2","spollerTitles","spollerTitle","removeAttribute","contains","nextElementSibling","hidden","setAttribute","e","el","target","hasAttribute","closest","oneSpoller","$ce6ec488e3aace99$var$hideSpollersBody1","toggle","$ce6ec488e3aace99$var$_slideToggle","preventDefault","spollerActiveTitle","querySelector","$ce6ec488e3aace99$var$_slideUp","duration","style","transitionProperty","transitionDuration","height","offsetHeight","overflow","paddingTop","paddingBottom","marginTop","marginBottom","setTimeout","removeProperty","$ce6ec488e3aace99$var$_slideDown"],"version":3,"file":"spollers.a8041940.js.map"}